<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<databaseChangeLog
        xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
                      http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.1.xsd">

    <changeSet author="User (generated)" id="1556454816659-1">
        <createTable tableName="accounts">
            <column autoIncrement="true" name="id" type="BIGINT">
                <constraints primaryKey="true"/>
            </column>
            <column name="about" type="VARCHAR(254)"/>
            <column name="email" type="VARCHAR(50)">
                <constraints nullable="false"/>
            </column>
            <column name="first_name" type="VARCHAR(25)">
                <constraints nullable="false"/>
            </column>
            <column name="last_name" type="VARCHAR(25)">
                <constraints nullable="false"/>
            </column>
            <column name="phone_number" type="VARCHAR(12)">
                <constraints nullable="false"/>
            </column>
            <column name="registration_date" type="date"/>
            <column name="role" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="image_id" type="BIGINT"/>
        </createTable>
    </changeSet>
    <changeSet author="User (generated)" id="1556454816659-2">
        <createTable tableName="accounts_subscribers">
            <column name="account_id" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="subscriber_id" type="BIGINT">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet author="User (generated)" id="1556454816659-3">
        <createTable tableName="building_working_days">
            <column name="building_id" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="working_day" type="SMALLINT">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet author="User (generated)" id="1556454816659-4">
        <createTable tableName="cities">
            <column autoIncrement="true" name="id" type="BIGINT">
                <constraints primaryKey="true"/>
            </column>
            <column name="name" type="VARCHAR(35)">
                <constraints nullable="false"/>
            </column>
            <column name="coordinate_x" type="DOUBLE">
                <constraints nullable="false"/>
            </column>
            <column name="coordinate_y" type="DOUBLE">
                <constraints nullable="false"/>
            </column>
            <column name="country_id" type="BIGINT">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet author="User (generated)" id="1556454816659-5">
        <createTable tableName="comments">
            <column autoIncrement="true" name="id" type="BIGINT">
                <constraints primaryKey="true"/>
            </column>
            <column name="creation_date" type="date">
                <constraints nullable="false"/>
            </column>
            <column name="text" type="VARCHAR(500)">
                <constraints nullable="false"/>
            </column>
            <column name="commented_by" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="post_id" type="BIGINT">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet author="User (generated)" id="1556454816659-6">
        <createTable tableName="countries">
            <column autoIncrement="true" name="id" type="BIGINT">
                <constraints primaryKey="true"/>
            </column>
            <column name="name" type="VARCHAR(35)">
                <constraints nullable="false"/>
            </column>
            <column name="coordinate_x" type="DOUBLE">
                <constraints nullable="false"/>
            </column>
            <column name="coordinate_y" type="DOUBLE">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet author="User (generated)" id="1556454816659-7">
        <createTable tableName="find_groups">
            <column autoIncrement="true" name="id" type="BIGINT">
                <constraints primaryKey="true"/>
            </column>
            <column name="creation_date" type="date">
                <constraints nullable="false"/>
            </column>
            <column name="description" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="name" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="start_date" type="date">
                <constraints nullable="false"/>
            </column>
            <column name="creator_id" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="route_id" type="BIGINT">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet author="User (generated)" id="1556454816659-8">
        <createTable tableName="hotels">
            <column name="id" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="address" type="VARCHAR(60)">
                <constraints nullable="false"/>
            </column>
            <column name="description" type="VARCHAR(255)"/>
            <column name="name" type="VARCHAR(35)">
                <constraints nullable="false"/>
            </column>
            <column name="coordinate_x" type="DOUBLE">
                <constraints nullable="false"/>
            </column>
            <column name="coordinate_y" type="DOUBLE">
                <constraints nullable="false"/>
            </column>
            <column name="city_id" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="image_id" type="BIGINT"/>
            <column name="closing_time" type="time"/>
            <column name="opening_time" type="time"/>
            <column name="telephone" type="VARCHAR(15)"/>
            <column name="type" type="SMALLINT">
                <constraints nullable="false"/>
            </column>
            <column name="web_site" type="VARCHAR(30)"/>
            <column name="maximum_price" type="FLOAT(12)"/>
            <column name="minimum_price" type="FLOAT(12)"/>
        </createTable>
    </changeSet>
    <changeSet author="User (generated)" id="1556454816659-9">
        <createTable tableName="images">
            <column autoIncrement="true" name="id" type="BIGINT">
                <constraints primaryKey="true"/>
            </column>
            <column name="format" type="VARCHAR(4)">
                <constraints nullable="false"/>
            </column>
            <column name="name" type="VARCHAR(50)">
                <constraints nullable="false"/>
            </column>
            <column name="upload_date" type="date">
                <constraints nullable="false"/>
            </column>
            <column name="account_id" type="BIGINT">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet author="User (generated)" id="1556454816659-10">
        <createTable tableName="key_generator">
            <column name="sequence_name" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="next_val" type="BIGINT"/>
        </createTable>
    </changeSet>
    <changeSet author="User (generated)" id="1556454816659-11">
        <createTable tableName="likes">
            <column autoIncrement="true" name="id" type="BIGINT">
                <constraints primaryKey="true"/>
            </column>
            <column name="liked_by" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="post_id" type="BIGINT">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet author="User (generated)" id="1556454816659-12">
        <createTable tableName="monuments">
            <column name="id" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="address" type="VARCHAR(60)">
                <constraints nullable="false"/>
            </column>
            <column name="description" type="VARCHAR(255)"/>
            <column name="name" type="VARCHAR(35)">
                <constraints nullable="false"/>
            </column>
            <column name="coordinate_x" type="DOUBLE">
                <constraints nullable="false"/>
            </column>
            <column name="coordinate_y" type="DOUBLE">
                <constraints nullable="false"/>
            </column>
            <column name="city_id" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="image_id" type="BIGINT"/>
        </createTable>
    </changeSet>
    <changeSet author="User (generated)" id="1556454816659-13">
        <createTable tableName="posts">
            <column autoIncrement="true" name="id" type="BIGINT">
                <constraints primaryKey="true"/>
            </column>
            <column name="content" type="LONGTEXT">
                <constraints nullable="false"/>
            </column>
            <column name="creation_date" type="date">
                <constraints nullable="false"/>
            </column>
            <column name="name" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="account_id" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="image_id" type="BIGINT"/>
            <column name="route_id" type="BIGINT"/>
        </createTable>
    </changeSet>
    <changeSet author="User (generated)" id="1556454816659-14">
        <createTable tableName="posts_images">
            <column name="account_id" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="image_id" type="BIGINT">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet author="User (generated)" id="1556454816659-15">
        <createTable tableName="restaurants">
            <column name="id" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="address" type="VARCHAR(60)">
                <constraints nullable="false"/>
            </column>
            <column name="description" type="VARCHAR(255)"/>
            <column name="name" type="VARCHAR(35)">
                <constraints nullable="false"/>
            </column>
            <column name="coordinate_x" type="DOUBLE">
                <constraints nullable="false"/>
            </column>
            <column name="coordinate_y" type="DOUBLE">
                <constraints nullable="false"/>
            </column>
            <column name="city_id" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="image_id" type="BIGINT"/>
            <column name="closing_time" type="time"/>
            <column name="opening_time" type="time"/>
            <column name="telephone" type="VARCHAR(15)"/>
            <column name="type" type="SMALLINT">
                <constraints nullable="false"/>
            </column>
            <column name="web_site" type="VARCHAR(30)"/>
            <column name="average_bill" type="FLOAT(12)"/>
            <column name="has_vegan_food" type="BIT(1)"/>
        </createTable>
    </changeSet>
    <changeSet author="User (generated)" id="1556454816659-16">
        <createTable tableName="routes">
            <column autoIncrement="true" name="id" type="BIGINT">
                <constraints primaryKey="true"/>
            </column>
            <column name="creation_date" type="date">
                <constraints nullable="false"/>
            </column>
            <column name="name" type="VARCHAR(100)">
                <constraints nullable="false"/>
            </column>
            <column name="is_verified" type="BIT(1)"/>
            <column name="author_id" type="BIGINT">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet author="User (generated)" id="1556454816659-17">
        <createTable tableName="routes_places">
            <column name="route_id" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="place_id" type="BIGINT">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet author="User (generated)" id="1556454816659-18">
        <createTable tableName="sales">
            <column autoIncrement="true" name="id" type="BIGINT">
                <constraints primaryKey="true"/>
            </column>
            <column name="creation_date" type="date">
                <constraints nullable="false"/>
            </column>
            <column name="name" type="VARCHAR(50)">
                <constraints nullable="false"/>
            </column>
            <column name="price" type="FLOAT(12)">
                <constraints nullable="false"/>
            </column>
            <column name="type_of_sale_post" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="creator_id" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="image_id" type="BIGINT"/>
        </createTable>
    </changeSet>
    <changeSet author="User (generated)" id="1556454816659-19">
        <createTable tableName="subscriber_group">
            <column name="subscriber_id" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="group_id" type="BIGINT">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet author="User (generated)" id="1556454816659-20">
        <createTable tableName="users">
            <column autoIncrement="true" name="id" type="BIGINT">
                <constraints primaryKey="true"/>
            </column>
            <column name="login" type="VARCHAR(50)">
                <constraints nullable="false"/>
            </column>
            <column name="password" type="VARCHAR(65)">
                <constraints nullable="false"/>
            </column>
            <column name="account_id" type="BIGINT">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet author="User (generated)" id="1556454816659-21">
        <addPrimaryKey columnNames="id" constraintName="PRIMARY" tableName="hotels"/>
    </changeSet>
    <changeSet author="User (generated)" id="1556454816659-22">
        <addPrimaryKey columnNames="sequence_name" constraintName="PRIMARY" tableName="key_generator"/>
    </changeSet>
    <changeSet author="User (generated)" id="1556454816659-23">
        <addPrimaryKey columnNames="id" constraintName="PRIMARY" tableName="monuments"/>
    </changeSet>
    <changeSet author="User (generated)" id="1556454816659-24">
        <addPrimaryKey columnNames="id" constraintName="PRIMARY" tableName="restaurants"/>
    </changeSet>
    <changeSet author="User (generated)" id="1556454816659-25">
        <addUniqueConstraint columnNames="phone_number" constraintName="UK_aien07q29q89wriyl53yj841h" tableName="accounts"/>
    </changeSet>
    <changeSet author="User (generated)" id="1556454816659-26">
        <addUniqueConstraint columnNames="email" constraintName="UK_n7ihswpy07ci568w34q0oi8he" tableName="accounts"/>
    </changeSet>
    <changeSet author="User (generated)" id="1556454816659-27">
        <addUniqueConstraint columnNames="login" constraintName="UK_ow0gan20590jrb00upg3va2fn" tableName="users"/>
    </changeSet>
    <changeSet author="User (generated)" id="1556454816659-28">
        <createIndex indexName="FK15oj6csyeqyebrj3pag7luduo" tableName="accounts">
            <column name="image_id"/>
        </createIndex>
    </changeSet>
    <changeSet author="User (generated)" id="1556454816659-29">
        <createIndex indexName="FK6gatmv9dwedve82icy8wrkdmk" tableName="cities">
            <column name="country_id"/>
        </createIndex>
    </changeSet>
    <changeSet author="User (generated)" id="1556454816659-30">
        <createIndex indexName="FKddl7747epwheh9umkc38f5688" tableName="accounts_subscribers">
            <column name="subscriber_id"/>
        </createIndex>
    </changeSet>
    <changeSet author="User (generated)" id="1556454816659-31">
        <createIndex indexName="FKhdb3v0c0nicxanvxl8je63062" tableName="accounts_subscribers">
            <column name="account_id"/>
        </createIndex>
    </changeSet>
    <changeSet author="User (generated)" id="1556454816659-32">
        <addForeignKeyConstraint baseColumnNames="image_id" baseTableName="accounts" constraintName="FK15oj6csyeqyebrj3pag7luduo" deferrable="false" initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="id" referencedTableName="images"/>
    </changeSet>
    <changeSet author="User (generated)" id="1556454816659-33">
        <addForeignKeyConstraint baseColumnNames="country_id" baseTableName="cities" constraintName="FK6gatmv9dwedve82icy8wrkdmk" deferrable="false" initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="id" referencedTableName="countries"/>
    </changeSet>
    <changeSet author="User (generated)" id="1556454816659-34">
        <addForeignKeyConstraint baseColumnNames="subscriber_id" baseTableName="accounts_subscribers" constraintName="FKddl7747epwheh9umkc38f5688" deferrable="false" initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="id" referencedTableName="accounts"/>
    </changeSet>
    <changeSet author="User (generated)" id="1556454816659-35">
        <addForeignKeyConstraint baseColumnNames="account_id" baseTableName="accounts_subscribers" constraintName="FKhdb3v0c0nicxanvxl8je63062" deferrable="false" initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="id" referencedTableName="accounts"/>
    </changeSet>
</databaseChangeLog>
